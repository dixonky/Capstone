<h1>Edit Profile</h1>

 {{#each user}}
    <div id="banner" class="welcome"></div>
    <div id="nav" class="welcome">
        <button onclick="location.href='/user/{{user_name}}'+'&'+'{{user_password}}'" type="button">User Page</button>
    </div>
        <script>checkUser('{{user_name}}',{{user_super}});</script>    
{{/each}}
<br>
<h2>Edit User</h2>

<br><br>
{{#each user}}
<form method="post">
    <label for="user_password">Password: </label>
    <input type="text" name="edit_user_password" id="edit_user_password" value='{{user_password}}'>
    <br><br>  
    <label for="user_email">Email: </label>
    <input type="text" name="edit_user_email" id="edit_user_email" value='{{user_email}}'>
    <br><br>
    <button onClick="updateUser('{{user_name}}', document.getElementById('edit_user_password').value,document.getElementById('edit_user_email').value)" type="button">Save Change</button>
    </form>
{{/each}}

<script language="JavaScript">
    
    //Function sends AJAX PUT to its own URL with changes to user profile
        //!! There are currently no checks for the new password !!
    function updateUser(user_name, user_password, user_email)
    {
        $.ajax({
            url: '/editUser/' + user_name+'&'+user_password,
            data: {user_password: user_password, user_email: user_email},
            type: 'PUT',
            success: function(result) {
                location.href = "/editUser/" + user_name + '&' + user_password;
            }
        })
    }
    
</script>

